{"ast":null,"code":"import React,{useEffect}from'react';import*as d3 from'd3';import'../App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";let data;const BarChart=()=>{useEffect(()=>{const margin={top:50,right:30,bottom:30,left:40};const height=500-margin.top-margin.bottom;const width=900-margin.left-margin.right;const svg=d3.select('#chart-container').append('svg').attr('width',width+margin.left+margin.right).attr('height',height+margin.top+margin.bottom).append('g').attr('transform',\"translate(\".concat(2*margin.left,\",\").concat(margin.top,\")\"));const xScale=d3.scaleBand().rangeRound([0,width-30]).paddingInner(0.1);const yScale=d3.scaleLinear().range([height,0]);svg.append('g').attr('class','axis y-axis');svg.append('g').attr('class','axis x-axis').attr('transform',\"translate(0,\".concat(height,\")\"));svg.append('text').attr('class','y-axis-title').attr('transform',\"translate(\".concat(-margin.left,\", \").concat(height/2,\") rotate(0)\")).attr('dy','-1em').style('text-anchor','start').style('text-anchor','middle');let type=document.querySelector('#group-by').value;let sortDirection='ascending';function updateChart(data,type,sortDirection){xScale.domain(data.map(d=>d.company));yScale.domain([0,d3.max(data,d=>d[type])]);;// Sorting based on the selected type and direction\ndata.sort((a,b)=>{const aValue=a[type];const bValue=b[type];return sortDirection==='ascending'?aValue-bValue:bValue-aValue;});// Update bars with transitions\nconst bars=svg.selectAll('.bar').data(data,d=>d.company);bars.enter().append('rect').attr('class','bar').merge(bars).transition().delay((d,i)=>i*50).duration(500).attr('x',d=>xScale(d.company)).attr('y',d=>yScale(d[type])).attr('width',xScale.bandwidth()).attr('height',d=>height-yScale(d[type]));bars.exit().remove();// Update axes and axis title with transitions\nsvg.select('.x-axis').transition().duration(500).call(d3.axisBottom(xScale));svg.select('.y-axis').transition().duration(500).call(d3.axisLeft(yScale));// Dynamically update the y-axis title based on the selected type\nconst yTitleText=type==='stores'?'Stores worldwide':'Revenue in billions U.S. dollars';svg.select('.y-axis-title').text(yTitleText).attr('transform',\"translate(\".concat(-margin.left/10+50,\", \").concat(margin.top-40,\") rotate(0)\"))// Adjust the translation values as needed\n.attr('dy','-1em').style('text-anchor','start').style('text-anchor','middle');}d3.csv('data.csv',d3.autoType).then(initialData=>{data=initialData;updateChart(data,type,sortDirection);});// Handling dropdown change\ndocument.querySelector('#group-by').addEventListener('change',function(){type=this.value;updateChart(data,type,sortDirection);});const sortButton=document.createElement('button');sortButton.innerHTML='Sort';sortButton.className='sort-button';sortButton.addEventListener('click',()=>{sortDirection=sortDirection==='ascending'?'descending':'ascending';updateChart(data,type,sortDirection);});document.getElementById('chart-container').appendChild(sortButton);},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"group-by\",children:\"Group By:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"group-by\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"stores\",children:\"Stores worldwide\"}),/*#__PURE__*/_jsx(\"option\",{value:\"revenue\",children:\"Revenue in billion U.S. dollars\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"chart-container\"})]});};export default BarChart;","map":{"version":3,"names":["React","useEffect","d3","jsx","_jsx","jsxs","_jsxs","data","BarChart","margin","top","right","bottom","left","height","width","svg","select","append","attr","concat","xScale","scaleBand","rangeRound","paddingInner","yScale","scaleLinear","range","style","type","document","querySelector","value","sortDirection","updateChart","domain","map","d","company","max","sort","a","b","aValue","bValue","bars","selectAll","enter","merge","transition","delay","i","duration","bandwidth","exit","remove","call","axisBottom","axisLeft","yTitleText","text","csv","autoType","then","initialData","addEventListener","sortButton","createElement","innerHTML","className","getElementById","appendChild","children","htmlFor","id"],"sources":["/Users/juliaweppler/Documents/GitHub/CoffeeHouse/src/components/BarChart.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport * as d3 from 'd3';\nimport '../App.css';\n\nlet data; \n\nconst BarChart = () => {\n  useEffect(() => {\n\n    const margin = { top: 50, right: 30, bottom: 30, left: 40 };\n    const height = 500 - margin.top - margin.bottom;\n\n    const width = 900 - margin.left - margin.right; \n\n  const svg = d3.select('#chart-container').append('svg')\n  .attr('width', width + margin.left + margin.right)\n  .attr('height', height + margin.top + margin.bottom)\n  .append('g')\n  .attr('transform', `translate(${2 * margin.left},${margin.top})`);\n  const xScale = d3.scaleBand().rangeRound([0, width - 30]).paddingInner(0.1);\n  \n    const yScale = d3.scaleLinear().range([height, 0]);\n\n    svg.append('g').attr('class', 'axis y-axis');\n    svg.append('g').attr('class', 'axis x-axis').attr('transform', `translate(0,${height})`);\n    svg.append('text').attr('class', 'y-axis-title').attr('transform', `translate(${-margin.left}, ${height / 2}) rotate(0)`) \n    .attr('dy', '-1em') \n    .style('text-anchor', 'start').style('text-anchor', 'middle');\n\n    let type = document.querySelector('#group-by').value;\n    let sortDirection = 'ascending';\n\n\n    function updateChart(data, type, sortDirection) {\n      xScale.domain(data.map(d => d.company));\n      yScale.domain([0, d3.max(data, d => d[type])]);;\n      // Sorting based on the selected type and direction\n      data.sort((a, b) => {\n        const aValue = a[type];\n        const bValue = b[type];\n        return sortDirection === 'ascending' ? aValue - bValue : bValue - aValue;\n      });\n\n      // Update bars with transitions\n      const bars = svg.selectAll('.bar').data(data, d => d.company);\n\n      bars\n        .enter()\n        .append('rect')\n        .attr('class', 'bar')\n        .merge(bars)\n        .transition()\n        .delay((d, i) => i * 50)\n        .duration(500)\n        .attr('x', d => xScale(d.company))\n        .attr('y', d => yScale(d[type]))\n        .attr('width', xScale.bandwidth())\n        .attr('height', d => height - yScale(d[type]));\n\n      bars.exit().remove();\n\n      // Update axes and axis title with transitions\n  svg.select('.x-axis').transition().duration(500).call(d3.axisBottom(xScale));\n  svg.select('.y-axis').transition().duration(500).call(d3.axisLeft(yScale));\n  \n  // Dynamically update the y-axis title based on the selected type\n  const yTitleText = type === 'stores' ? 'Stores worldwide' : 'Revenue in billions U.S. dollars';\n  svg.select('.y-axis-title').text(yTitleText).attr('transform', `translate(${-margin.left/10 + 50}, ${margin.top - 40}) rotate(0)`) // Adjust the translation values as needed\n  .attr('dy', '-1em') \n  .style('text-anchor', 'start').style('text-anchor', 'middle');\n    }\n\n    d3.csv('data.csv', d3.autoType).then(initialData => {\n        data = initialData;\n        updateChart(data, type, sortDirection);\n      });\n    \n\n    // Handling dropdown change\n    document.querySelector('#group-by').addEventListener('change', function () {\n      type = this.value;\n      updateChart(data, type, sortDirection);\n    });\n    const sortButton = document.createElement('button');\n  sortButton.innerHTML = 'Sort';\n  sortButton.className = 'sort-button';\n  sortButton.addEventListener('click', () => {\n    sortDirection = sortDirection === 'ascending' ? 'descending' : 'ascending';\n    updateChart(data, type, sortDirection);\n  });\n  document.getElementById('chart-container').appendChild(sortButton);\n\n  }, []); \n\n  return (\n    <div>\n      <label htmlFor=\"group-by\">Group By:</label>\n      <select id=\"group-by\">\n        <option value=\"stores\">Stores worldwide</option>\n        <option value=\"revenue\">Revenue in billion U.S. dollars</option>\n      </select>\n      <div id=\"chart-container\"></div>    \n    </div>\n  );\n};\nexport default BarChart;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,MAAO,GAAK,CAAAC,EAAE,KAAM,IAAI,CACxB,MAAO,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEpB,GAAI,CAAAC,IAAI,CAER,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrBP,SAAS,CAAC,IAAM,CAEd,KAAM,CAAAQ,MAAM,CAAG,CAAEC,GAAG,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,MAAM,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CAC3D,KAAM,CAAAC,MAAM,CAAG,GAAG,CAAGL,MAAM,CAACC,GAAG,CAAGD,MAAM,CAACG,MAAM,CAE/C,KAAM,CAAAG,KAAK,CAAG,GAAG,CAAGN,MAAM,CAACI,IAAI,CAAGJ,MAAM,CAACE,KAAK,CAEhD,KAAM,CAAAK,GAAG,CAAGd,EAAE,CAACe,MAAM,CAAC,kBAAkB,CAAC,CAACC,MAAM,CAAC,KAAK,CAAC,CACtDC,IAAI,CAAC,OAAO,CAAEJ,KAAK,CAAGN,MAAM,CAACI,IAAI,CAAGJ,MAAM,CAACE,KAAK,CAAC,CACjDQ,IAAI,CAAC,QAAQ,CAAEL,MAAM,CAAGL,MAAM,CAACC,GAAG,CAAGD,MAAM,CAACG,MAAM,CAAC,CACnDM,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC,WAAW,cAAAC,MAAA,CAAe,CAAC,CAAGX,MAAM,CAACI,IAAI,MAAAO,MAAA,CAAIX,MAAM,CAACC,GAAG,KAAG,CAAC,CACjE,KAAM,CAAAW,MAAM,CAAGnB,EAAE,CAACoB,SAAS,CAAC,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,CAAER,KAAK,CAAG,EAAE,CAAC,CAAC,CAACS,YAAY,CAAC,GAAG,CAAC,CAEzE,KAAM,CAAAC,MAAM,CAAGvB,EAAE,CAACwB,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAACb,MAAM,CAAE,CAAC,CAAC,CAAC,CAElDE,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,OAAO,CAAE,aAAa,CAAC,CAC5CH,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,OAAO,CAAE,aAAa,CAAC,CAACA,IAAI,CAAC,WAAW,gBAAAC,MAAA,CAAiBN,MAAM,KAAG,CAAC,CACxFE,GAAG,CAACE,MAAM,CAAC,MAAM,CAAC,CAACC,IAAI,CAAC,OAAO,CAAE,cAAc,CAAC,CAACA,IAAI,CAAC,WAAW,cAAAC,MAAA,CAAe,CAACX,MAAM,CAACI,IAAI,OAAAO,MAAA,CAAKN,MAAM,CAAG,CAAC,eAAa,CAAC,CACxHK,IAAI,CAAC,IAAI,CAAE,MAAM,CAAC,CAClBS,KAAK,CAAC,aAAa,CAAE,OAAO,CAAC,CAACA,KAAK,CAAC,aAAa,CAAE,QAAQ,CAAC,CAE7D,GAAI,CAAAC,IAAI,CAAGC,QAAQ,CAACC,aAAa,CAAC,WAAW,CAAC,CAACC,KAAK,CACpD,GAAI,CAAAC,aAAa,CAAG,WAAW,CAG/B,QAAS,CAAAC,WAAWA,CAAC3B,IAAI,CAAEsB,IAAI,CAAEI,aAAa,CAAE,CAC9CZ,MAAM,CAACc,MAAM,CAAC5B,IAAI,CAAC6B,GAAG,CAACC,CAAC,EAAIA,CAAC,CAACC,OAAO,CAAC,CAAC,CACvCb,MAAM,CAACU,MAAM,CAAC,CAAC,CAAC,CAAEjC,EAAE,CAACqC,GAAG,CAAChC,IAAI,CAAE8B,CAAC,EAAIA,CAAC,CAACR,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAC/C;AACAtB,IAAI,CAACiC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CAClB,KAAM,CAAAC,MAAM,CAAGF,CAAC,CAACZ,IAAI,CAAC,CACtB,KAAM,CAAAe,MAAM,CAAGF,CAAC,CAACb,IAAI,CAAC,CACtB,MAAO,CAAAI,aAAa,GAAK,WAAW,CAAGU,MAAM,CAAGC,MAAM,CAAGA,MAAM,CAAGD,MAAM,CAC1E,CAAC,CAAC,CAEF;AACA,KAAM,CAAAE,IAAI,CAAG7B,GAAG,CAAC8B,SAAS,CAAC,MAAM,CAAC,CAACvC,IAAI,CAACA,IAAI,CAAE8B,CAAC,EAAIA,CAAC,CAACC,OAAO,CAAC,CAE7DO,IAAI,CACDE,KAAK,CAAC,CAAC,CACP7B,MAAM,CAAC,MAAM,CAAC,CACdC,IAAI,CAAC,OAAO,CAAE,KAAK,CAAC,CACpB6B,KAAK,CAACH,IAAI,CAAC,CACXI,UAAU,CAAC,CAAC,CACZC,KAAK,CAAC,CAACb,CAAC,CAAEc,CAAC,GAAKA,CAAC,CAAG,EAAE,CAAC,CACvBC,QAAQ,CAAC,GAAG,CAAC,CACbjC,IAAI,CAAC,GAAG,CAAEkB,CAAC,EAAIhB,MAAM,CAACgB,CAAC,CAACC,OAAO,CAAC,CAAC,CACjCnB,IAAI,CAAC,GAAG,CAAEkB,CAAC,EAAIZ,MAAM,CAACY,CAAC,CAACR,IAAI,CAAC,CAAC,CAAC,CAC/BV,IAAI,CAAC,OAAO,CAAEE,MAAM,CAACgC,SAAS,CAAC,CAAC,CAAC,CACjClC,IAAI,CAAC,QAAQ,CAAEkB,CAAC,EAAIvB,MAAM,CAAGW,MAAM,CAACY,CAAC,CAACR,IAAI,CAAC,CAAC,CAAC,CAEhDgB,IAAI,CAACS,IAAI,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC,CAEpB;AACJvC,GAAG,CAACC,MAAM,CAAC,SAAS,CAAC,CAACgC,UAAU,CAAC,CAAC,CAACG,QAAQ,CAAC,GAAG,CAAC,CAACI,IAAI,CAACtD,EAAE,CAACuD,UAAU,CAACpC,MAAM,CAAC,CAAC,CAC5EL,GAAG,CAACC,MAAM,CAAC,SAAS,CAAC,CAACgC,UAAU,CAAC,CAAC,CAACG,QAAQ,CAAC,GAAG,CAAC,CAACI,IAAI,CAACtD,EAAE,CAACwD,QAAQ,CAACjC,MAAM,CAAC,CAAC,CAE1E;AACA,KAAM,CAAAkC,UAAU,CAAG9B,IAAI,GAAK,QAAQ,CAAG,kBAAkB,CAAG,kCAAkC,CAC9Fb,GAAG,CAACC,MAAM,CAAC,eAAe,CAAC,CAAC2C,IAAI,CAACD,UAAU,CAAC,CAACxC,IAAI,CAAC,WAAW,cAAAC,MAAA,CAAe,CAACX,MAAM,CAACI,IAAI,CAAC,EAAE,CAAG,EAAE,OAAAO,MAAA,CAAKX,MAAM,CAACC,GAAG,CAAG,EAAE,eAAa,CAAE;AAAA,CAClIS,IAAI,CAAC,IAAI,CAAE,MAAM,CAAC,CAClBS,KAAK,CAAC,aAAa,CAAE,OAAO,CAAC,CAACA,KAAK,CAAC,aAAa,CAAE,QAAQ,CAAC,CAC3D,CAEA1B,EAAE,CAAC2D,GAAG,CAAC,UAAU,CAAE3D,EAAE,CAAC4D,QAAQ,CAAC,CAACC,IAAI,CAACC,WAAW,EAAI,CAChDzD,IAAI,CAAGyD,WAAW,CAClB9B,WAAW,CAAC3B,IAAI,CAAEsB,IAAI,CAAEI,aAAa,CAAC,CACxC,CAAC,CAAC,CAGJ;AACAH,QAAQ,CAACC,aAAa,CAAC,WAAW,CAAC,CAACkC,gBAAgB,CAAC,QAAQ,CAAE,UAAY,CACzEpC,IAAI,CAAG,IAAI,CAACG,KAAK,CACjBE,WAAW,CAAC3B,IAAI,CAAEsB,IAAI,CAAEI,aAAa,CAAC,CACxC,CAAC,CAAC,CACF,KAAM,CAAAiC,UAAU,CAAGpC,QAAQ,CAACqC,aAAa,CAAC,QAAQ,CAAC,CACrDD,UAAU,CAACE,SAAS,CAAG,MAAM,CAC7BF,UAAU,CAACG,SAAS,CAAG,aAAa,CACpCH,UAAU,CAACD,gBAAgB,CAAC,OAAO,CAAE,IAAM,CACzChC,aAAa,CAAGA,aAAa,GAAK,WAAW,CAAG,YAAY,CAAG,WAAW,CAC1EC,WAAW,CAAC3B,IAAI,CAAEsB,IAAI,CAAEI,aAAa,CAAC,CACxC,CAAC,CAAC,CACFH,QAAQ,CAACwC,cAAc,CAAC,iBAAiB,CAAC,CAACC,WAAW,CAACL,UAAU,CAAC,CAElE,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE5D,KAAA,QAAAkE,QAAA,eACEpE,IAAA,UAAOqE,OAAO,CAAC,UAAU,CAAAD,QAAA,CAAC,WAAS,CAAO,CAAC,cAC3ClE,KAAA,WAAQoE,EAAE,CAAC,UAAU,CAAAF,QAAA,eACnBpE,IAAA,WAAQ4B,KAAK,CAAC,QAAQ,CAAAwC,QAAA,CAAC,kBAAgB,CAAQ,CAAC,cAChDpE,IAAA,WAAQ4B,KAAK,CAAC,SAAS,CAAAwC,QAAA,CAAC,iCAA+B,CAAQ,CAAC,EAC1D,CAAC,cACTpE,IAAA,QAAKsE,EAAE,CAAC,iBAAiB,CAAM,CAAC,EAC7B,CAAC,CAEV,CAAC,CACD,cAAe,CAAAlE,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}